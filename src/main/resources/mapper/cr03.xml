<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dksys.biz.user.cr.cr03.mapper.CR03Mapper">
    <select id="selectEstCount" resultType="int">
        SELECT COUNT(*)
        FROM TB_SM01M01 A
        WHERE 1 = 1
    </select>
   
    <select id="selectEstList" resultType="CamelMap">
		SELECT * FROM ( SELECT T.*,row_number() OVER (ORDER BY file_trgt_key) 
		AS RNUM FROM (SELECT * FROM TB_SM01M01 
					  <where> 1 = 1 
					  <if test="coCd != null and !coCd.equals('')">
		                AND co_cd = #{coCd}
		              </if>
					  </where>
					  ) T ) Z
	</select>
	
	<delete id="deleteEst">
        DELETE
        FROM TB_SM01M01
        WHERE CO_CD = #{coCd}
    </delete>
    
    <delete id="deleteEstDetail">
        DELETE
        FROM TB_SM01D01
        WHERE CO_CD = #{coCd}
    </delete>
    
    <delete id="deleteAllEstDetails">
        DELETE
        FROM TB_SM01D01
        WHERE 1 = 1
          AND CO_CD = #{coCd}
    </delete>
</mapper>